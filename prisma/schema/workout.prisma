model WorkoutOfMesocycle {
  id            String         @id @default(cuid())
  workoutId     String         @unique
  mesocycleId   String
  splitDayName  String
  workoutStatus WorkoutStatus?
  workout       Workout        @relation(fields: [workoutId], references: [id])
  mesocycle     Mesocycle      @relation(fields: [mesocycleId], references: [id])
}

model Workout {
  id                 String              @id @default(cuid())
  name               String
  user               User                @relation(fields: [userId], references: [id])
  workoutOfMesocycle WorkoutOfMesocycle?
  createdAt          DateTime            @default(now())
  workoutExercises   WorkoutExercise[]
  userId             String
}

model WorkoutExercise {
  id                           String               @id @default(cuid())
  exerciseIndex                Int
  workout                      Workout              @relation(fields: [workoutId], references: [id])
  workoutId                    String
  targetMuscleGroup            MuscleGroup
  customMuscleGroup            String?
  involvesBodyweight           Boolean
  workoutExerciseSets          WorkoutExerciseSet[]
  setType                      SetType
  repRangeStart                Int
  repRangeEnd                  Int
  note                         String?
  preferredProgressionVariable ProgressionVariable?
  overloadPercentage           Float?
  lastSetToFailure             Boolean?
  forceRIRMatching             Boolean?
  minimumWeightChange          Float?
}

model WorkoutExerciseSet {
  id                String                    @id @default(cuid())
  workoutExercise   WorkoutExercise           @relation(fields: [workoutExerciseId], references: [id])
  workoutExerciseId String
  rep               Int
  load              Int
  RIR               Int
  miniSets          WorkoutExerciseMiniSets[]
}

model WorkoutExerciseMiniSets {
  id                   String             @id @default(cuid())
  rep                  Int
  load                 Int
  RIR                  Int
  parentSet            WorkoutExerciseSet @relation(fields: [workoutExerciseSetId], references: [id])
  workoutExerciseSetId String
}
